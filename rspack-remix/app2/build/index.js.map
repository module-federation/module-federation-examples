{"version":3,"file":"index.js","sources":["./.cache/server-build.js","../../node_modules/.pnpm/@remix-run+dev@2.2.0_@types+node@20.9.0_typescript@5.2.2/node_modules/@remix-run/dev/dist/config/defaults/entry.server.node.tsx","./app/root.tsx","./app/routes/_index.tsx","./server.ts"],"sourcesContent":["\n  import * as entryServer from \"/Users/zackjackson/lulu_dev/module-federation-examples/node_modules/.pnpm/@remix-run+dev@2.2.0_@types+node@20.9.0_typescript@5.2.2/node_modules/@remix-run/dev/dist/config/defaults/entry.server.node.tsx\";\n  import * as route0 from \"../app/root.tsx\";\nimport * as route1 from \"../app/routes/_index.tsx\";\n  export const entry = { module: entryServer };\n  export const routes = {\n    \"root\": {\n      id: \"root\",\n      parentId: undefined,\n      path: \"\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route0\n    },\n  \"routes/_index\": {\n      id: \"routes/_index\",\n      parentId: \"root\",\n      path: undefined,\n      index: true,\n      caseSensitive: undefined,\n      module: route1\n    }\n  };\n  export const assets = {\"version\":\"3fa11160186179d5b983\",\"url\":\"/build/manifest-3FA11160186179D5B983.js\",\"entry\":{\"imports\":[\"/build/runtime-cb6a0d8bac21c032c4c5.js\",\"/build/entry.client-6c38fdcf3a9e42fa989e.js\",\"/build/root-40cf8f30f6810d582feb.js\"],\"module\":\"/build/entry.client-6c38fdcf3a9e42fa989e.js\"},\"routes\":{\"root\":{\"id\":\"root\",\"path\":\"\",\"module\":\"/build/root-40cf8f30f6810d582feb.js\",\"imports\":[\"/build/runtime-cb6a0d8bac21c032c4c5.js\"],\"hasAction\":false,\"hasLoader\":true,\"hasCatchBoundary\":false,\"hasErrorBoundary\":false},\"routes/_index\":{\"id\":\"routes/_index\",\"parentId\":\"root\",\"index\":true,\"module\":\"/build/routes/_index-e2583b3bf88263c95d92.js\",\"imports\":[\"/build/runtime-cb6a0d8bac21c032c4c5.js\"],\"hasAction\":false,\"hasLoader\":true,\"hasCatchBoundary\":false,\"hasErrorBoundary\":false}}};\n  export const future = {\"v3_fetcherPersist\":false};\n  export const publicPath = \"/build/\";\n","import { PassThrough } from \"node:stream\";\n\nimport type { AppLoadContext, EntryContext } from \"@remix-run/node\";\nimport { createReadableStreamFromReadable } from \"@remix-run/node\";\nimport { RemixServer } from \"@remix-run/react\";\nimport isbot from \"isbot\";\nimport { renderToPipeableStream } from \"react-dom/server\";\n\nconst ABORT_DELAY = 5_000;\n\nexport default function handleRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext,\n  loadContext: AppLoadContext\n) {\n  return isbot(request.headers.get(\"user-agent\"))\n    ? handleBotRequest(\n        request,\n        responseStatusCode,\n        responseHeaders,\n        remixContext\n      )\n    : handleBrowserRequest(\n        request,\n        responseStatusCode,\n        responseHeaders,\n        remixContext\n      );\n}\n\nfunction handleBotRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext\n) {\n  return new Promise((resolve, reject) => {\n    let shellRendered = false;\n    const { pipe, abort } = renderToPipeableStream(\n      <RemixServer\n        context={remixContext}\n        url={request.url}\n        abortDelay={ABORT_DELAY}\n      />,\n      {\n        onAllReady() {\n          shellRendered = true;\n          const body = new PassThrough();\n          const stream = createReadableStreamFromReadable(body);\n\n          responseHeaders.set(\"Content-Type\", \"text/html\");\n\n          resolve(\n            new Response(stream, {\n              headers: responseHeaders,\n              status: responseStatusCode,\n            })\n          );\n\n          pipe(body);\n        },\n        onShellError(error: unknown) {\n          reject(error);\n        },\n        onError(error: unknown) {\n          responseStatusCode = 500;\n          // Log streaming rendering errors from inside the shell.  Don't log\n          // errors encountered during initial shell rendering since they'll\n          // reject and get logged in handleDocumentRequest.\n          if (shellRendered) {\n            console.error(error);\n          }\n        },\n      }\n    );\n\n    setTimeout(abort, ABORT_DELAY);\n  });\n}\n\nfunction handleBrowserRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext\n) {\n  return new Promise((resolve, reject) => {\n    let shellRendered = false;\n    const { pipe, abort } = renderToPipeableStream(\n      <RemixServer\n        context={remixContext}\n        url={request.url}\n        abortDelay={ABORT_DELAY}\n      />,\n      {\n        onShellReady() {\n          shellRendered = true;\n          const body = new PassThrough();\n          const stream = createReadableStreamFromReadable(body);\n\n          responseHeaders.set(\"Content-Type\", \"text/html\");\n\n          resolve(\n            new Response(stream, {\n              headers: responseHeaders,\n              status: responseStatusCode,\n            })\n          );\n\n          pipe(body);\n        },\n        onShellError(error: unknown) {\n          reject(error);\n        },\n        onError(error: unknown) {\n          responseStatusCode = 500;\n          // Log streaming rendering errors from inside the shell.  Don't log\n          // errors encountered during initial shell rendering since they'll\n          // reject and get logged in handleDocumentRequest.\n          if (shellRendered) {\n            console.error(error);\n          }\n        },\n      }\n    );\n\n    setTimeout(abort, ABORT_DELAY);\n  });\n}\n","import {\n  Links,\n  Meta,\n  Outlet,\n  Scripts,\n  ScrollRestoration,\n} from \"@remix-run/react\";\n\nexport function loader() {\n  return \"Hello, World!\";\n}\n\nexport default function App() {\n  return (\n    <html lang=\"en\">\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        <Outlet />\n        <ScrollRestoration />\n        <Scripts />\n      </body>\n    </html>\n  );\n}\n","import { useLoaderData } from \"@remix-run/react\";\n\nexport function loader() {\n  return { message: \"Hello, World!\" };\n}\n\nexport default function Home() {\n  const { message } = useLoaderData();\n  return (\n    <div>\n      <h1>Home</h1>\n      <p>{message}</p>\n    </div>\n  );\n}\n","import express from \"express\";\nimport { createRequestHandler } from \"@remix-run/express\";\nimport cors from 'cors';\n\nimport * as build from \"@remix-run/dev/server-build.js\";\n\nconst app = express();\napp.use(cors());\napp.use(express.static(\"public\"));\napp.use('/server', express.static(\"build\"));\napp.all(\"*\", createRequestHandler({ build }));\n\napp.listen(3001, () => {\n  console.log(`Server started at http://localhost:3001`);\n});\n"],"names":[],"mappings":"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"}